<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - My Flask Application</title>
    <link rel="stylesheet" type="text/css" href="/static/content/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/static/content/site.css" />
    <script src="/static/scripts/modernizr-2.6.2.js"></script>

    <style>
        /* Selected row stays blue at all times */
        .selected-row td {
            background-color: #d0ebff !important;
        }

        /* Hover effect only applies to NON-selected rows */
        table tbody tr:not(.selected-row):hover td {
            background-color: #f1f3f5 !important;
            cursor: pointer;
        }

        /* Fixed widths for salary details table */
        #salaryDetailsTable th,
        #salaryDetailsTable td {
            width: 150px;
            max-width: 150px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Optional: Make salary details table cells aligned right for numeric data */
        #salaryDetailsTable td {
            text-align: right;
        }

        /* Optional: Make first column (labels) left aligned */
        #salaryDetailsTable th {
            text-align: left;
            background-color: #f7f7f7;
        }
    </style>
</head>

<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="/" class="navbar-brand">Application name</a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="{{ url_for('main.home') }}">Home</a></li>
                    <li><a href="{{ url_for('main.about') }}">About</a></li>
                    <li><a href="{{ url_for('main.contact') }}">Contact</a></li>
                    <li><a href="{{ url_for('main.human_resources') }}">Human Resources</a></li>
                    <li><a href="{{ url_for('main.project_manager') }}">Project Manager</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container body-content" style="margin-top: 70px;">
        {% block content %}{% endblock %}
        <hr />
        <footer>
            <p>&copy; {{ year }} - My Flask Application</p>
        </footer>
    </div>

    <script src="/static/scripts/jquery-1.10.2.js"></script>
    <script src="/static/scripts/bootstrap.js"></script>
    <script src="/static/scripts/respond.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const rows = document.querySelectorAll("#employeeTable tbody tr");

            rows.forEach(row => {
                row.addEventListener("click", () => {
                    // Remove selection from all rows
                    rows.forEach(r => r.classList.remove("selected-row"));
                    // Add selection to clicked row
                    row.classList.add("selected-row");

                    // Extract data attributes
                    const employeeNo = row.dataset.employeeNo || '';
                    const employeeName = row.dataset.employeeName || '';
                    const currentSalaryRaw = row.dataset.currentSalary || '0';
                    const currentSalary = parseFloat(currentSalaryRaw);

                    // Calculate new salary and percent increase
                    const newSalary = currentSalary * 1.05; // 5% increase example
                    const percentIncrease = currentSalary > 0 ? ((newSalary - currentSalary) / currentSalary) * 100 : 0;

                    // Populate the salary details panel
                    document.getElementById("detail-empno").innerText = employeeNo;
                    document.getElementById("detail-name").innerText = employeeName;
                    document.getElementById("detail-current-salary").innerText =
                        currentSalary ? "$" + currentSalary.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : "";
                    document.getElementById("detail-new-salary").innerText =
                        newSalary ? "$" + newSalary.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : "";
                    document.getElementById("detail-percent").innerText =
                        percentIncrease ? percentIncrease.toFixed(2) + "%" : "";
                });
            });
        });
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
